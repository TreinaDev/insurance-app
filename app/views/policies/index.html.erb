<h1 class="my-3"><%= t '.title' %></h1>

<ul class="nav nav-tabs" id="myTab" role="tablist"> 
 <li class="nav-item" role="presentation">
    <button class="nav-link link-dark active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all-tab-pane" type="button" 
      role="tab" aria-controls="all-tab-pane" aria-selected="true">
      <%= t '.policies_all' %>
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link link-dark" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending-tab-pane" type="button" 
      role="tab" aria-controls="pending-tab-pane" aria-selected="false">
      <%= t '.policies_pending' %>
    </button>
  </li>  
  <li class="nav-item" role="presentation">
    <button class="nav-link link-dark" id="pending-payment-tab" data-bs-toggle="tab" data-bs-target="#pending-payment-tab-pane" type="button" 
      role="tab" aria-controls="pending-payment-tab-pane" aria-selected="false">
      <%= t '.policies_pending_payment' %>
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link link-dark" id="active-tab" data-bs-toggle="tab" data-bs-target="#active-tab-pane" 
      type="button" role="tab" aria-controls="active-tab-pane" aria-selected="false">
      <%= t '.policies_active' %>
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link link-dark" id="canceled-tab" data-bs-toggle="tab" data-bs-target="#canceled-tab-pane" 
      type="button" role="tab" aria-controls="canceled-tab-pane" aria-selected="false">
      <%= t '.policies_canceled' %>
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link link-dark" id="expired_late-tab" data-bs-toggle="tab" data-bs-target="#expired_late-tab-pane" 
      type="button" role="tab" aria-controls="expired-tab-pane" aria-selected="false">
      <%= t '.policies_expired' %>
    </button>
  </li>
</ul>

<div class="tab-content" id="myTabContent"> 
  <div class="tab-pane fade show active" id="all-tab-pane" role="tabpanel" aria-labelledby="all-tab" tabindex="0">
    <% if current_user.admin? %>
      <% if @policies_all.any? %>
        <% @policies =  @policies_all %>
          <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_policies_registered' %>
        </div>
      <% end %>
    <% else %>
      <% if @policies_all_id.present? %>
            <% @policies =  @policies_all_id %>
              <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_policies_registered' %>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="tab-pane fade" id="pending-tab-pane" role="tabpanel" aria-labelledby="pending-tab" tabindex="0">
    <% if current_user.admin? %>
    <% @policies_pending = @policies_pending %>
      <% if @policies_pending.any? %>
        <% @policies =  @policies_pending %>
        <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_pending_policies_registered' %>
        </div>
      <% end %>
    <% else %>
      <% if @policies_pending_id.present? %>
            <% @policies =  @policies_pending_id %>
              <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_pending_policies_registered' %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="tab-pane fade" id="pending-payment-tab-pane" role="tabpanel" aria-labelledby="pending-payment-tab" tabindex="0">
    <% if current_user.admin? %>
      <% if @policies_pending_payment.any? %>
        <% @policies =  @policies_pending_payment %>
        <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_pending_payment_policies_registered' %>
        </div>
      <% end %> 
    <% else %>
      <% if @policies_pending_payment_id.present? %>
            <% @policies =  @policies_pending_payment_id %>
              <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_pending_payment_policies_registered' %>
        </div>
      <% end %>
    <% end %> 
  </div>
  <div class="tab-pane fade" id="active-tab-pane" role="tabpanel" aria-labelledby="active-tab" tabindex="0">
    <% if current_user.admin? %>
      <% if @policies_active.any? %>
        <% @policies =  @policies_active %>
        <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_active_policies_registered' %>
        </div>
      <% end %> 
    <% else %>
      <% if @policies_active_id.present? %>
            <% @policies =  @policies_active_id %>
              <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_active_policies_registered' %>
        </div>
      <% end %>
    <% end %> 
  </div>
  <div class="tab-pane fade" id="canceled-tab-pane" role="tabpanel" aria-labelledby="canceled-tab" tabindex="0">
    <% if current_user.admin? %>
      <% if @policies_canceled.any? %>
        <% @policies = @policies_canceled %>
        <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_canceled_policies_registered' %>
        </div>
      <% end %> 
    <% else %>
      <% if @policies_canceled_id.present? %>
            <% @policies =  @policies_canceled_id %>
              <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_canceled_policies_registered' %>
        </div>
      <% end %>
    <% end %> 
  </div>
  <div class="tab-pane fade" id="expired_late-tab-pane" role="tabpanel" aria-labelledby="expired_late-tab" tabindex="0">
    <% if current_user.admin? %>
      <% if @policies_expired.any? %>
        <% @policies = @policies_expired %>
        <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_expired_policies_registered' %>
        </div>
      <% end %> 
    <% else %>
      <% if @policies_expired_id.present? %>
            <% @policies =  @policies_expired_id %>
              <%= render 'policies_table' %>
      <% else %>
        <div class="alert alert-secondary text-center">
          <%= t '.no_expired_policies_registered' %>
        </div>
      <% end %>
    <% end %> 
  </div>
</div>